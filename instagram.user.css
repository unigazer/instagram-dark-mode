/* ==UserStyle==
@name         Instagram Dark/Light Mode
@description  A proper dark mode for Instagram web version
@namespace    https://github.com/unigazer
@author       Vladimir Jovanovic <me@vladio.me> (https://vladio.me)
@homepageURL  https://github.com/unigazer/instagram-dark-mode
@supportURL   https://github.com/unigazer/instagram-dark-mode/issues
@updateURL    https://userstyles.world/api/style/4465.user.css
@version      3.0.0
@preprocessor stylus
@var color    linkColor  "Link color"   #fafafa
@var checkbox	animationToggle "Enable animations"	1
@var select		theme "Theme" ["dark:Dark theme", "light:Light theme", "system:System theme"]
==/UserStyle== */
@-moz-document domain("instagram.com") {
  :root {
    --dark: #1c1c1c;
    --darker: #111;
    --border-color: #2d2d2d;
    --text-color: #bfbfbf;
    --text-color-visited: #9f9f9f;
  }

  /* General */
  .x1n2onr6 {
    backdrop-filter: blur(12px);
  }

  ._aak3 {
    margin-top: 3rem;
  }

  if (animationToggle) {
    ._ab6k,
    ._ab70 {
      animation: fadeIn 300ms linear;
    }

    @keyframes fadeIn {
      0% {
        opacity: 0;
      }

      100% {
        opacity: 1;
      }
    }
  }

  /* Layout (main) */
  ._aalx {
    margin-left: calc(100vw - 85vw);
  }

  ._aam2 {
    max-width: 35vw;
  }

  /* Dark */
  darkStyling() {
    body._a3wf,
    .xnz67gz {
      background: var(--darker);
    }
    /* Text */
    ._aacx {
      color: var(--text-color);
    }

    ._acao._acat,
    a._acao._acat,
    a._acao._acat:visited,
    .x1i10hfl {
      color: linkColor;
      font-weight: 700;
    }

    /* Icons */
    svg {
      fill: #fff;
      color: #fff;
    }

    svg[aria-label="Like"] {
      fill: #ed4956;
    }

    svg[aria-label="Unlike"] {
      fill: #ed4956;
      filter: drop-shadow(0 0 10px #ed4956);
    }

    /* Sidebar */
    .x1o5hw5a.x1o5hw5a {
      background-color: var(--dark);
    }

    .xvb8j5 {
      border-right: 1px solid var(--border-color);
    }

    .x1l895ks:hover {
      background-color: var(--darker);
    }

    /* Stories timeline */
    ._aac6 {
      background: var(--dark);
      border: 1px solid var(--border-color);
    }

    /* Timeline */
    ._aam1 {
      background: var(--darker);
    }

    /* Timeline posts */
    ._ab6k,
    ._ab6s,
    ._aatc ._aasi {
      background-color: var(--dark);
    }

    ._ab6k,
    ._ab6s {
      border: 1px solid var(--border-color);
    }

    ._ae3w {
      border-left: 1px solid var(--border-color);
    }

    ._aaoe {
      border-top: 1px solid var(--border-color);
    }

    ._aasi {
      border-bottom: 1px solid var(--border-color);
    }

    /* Timeline posts (comments) */
    ._ae1i {
      background-color: var(--darker);
    }

    /* Timeline posts (focused) */
    ._aatg ._aasi,
    ._ae3w {
      background-color: var(--dark);
    }

    ._aatg._aati ._aasi {
      border-left: 1px solid var(--border-color);
      border-bottom: 1px solid var(--border-color);
    }

    ._ae5r {
      background-color: var(--dark);
    }

    ._ae47 {
      border-top: 1px solid var(--border-color);
    }

    /* Personal profile card */
    ._aak1,
    ._aak1:visited {
      color: linkColor;
      font-weight: 700;
    }

    /* Suggestion for you */
    ._aak3,
    ._ab8q {
      background-color: var(--dark);
    }

    ._aak3 {
      border: 1px solid var(--border-color);
      border-radius: 8px;
    }

    ._aba7 {
      padding: 1rem;
    }

    /* Dialog */
    .xxfnqb6 {
      background-color: var(--dark);
    }
    ._a9-z:only-child {
      background-color: var(--dark);
    }

    ._a9_1 {
      color: var(--text-color);
      border-top: 1px solid var(--border-color);
    }

    ._a9-- {
      border-top: 1px solid var(--border-color);
    }

    ._ac76 {
      border-bottom: 1px solid var(--border-color);
    }

    ._ac78 {
      color: var(--text-color);
    }

    hr._aest {
      background-color: var(--border-color);
    }

    /* Explore */
    /* Search input */
    ._aaw8,
    ._aauy,
    ._aa61 {
      background: var(--dark);
      color: var(--text-color);
    }

    ._abm4:hover,
    ._abn_ {
      background: var(--darker);
    }

    /* Messages */
    ._ab8j {
      max-width: calc(100vw - 725px) !important;
    }
    ._aa5c,
    ._aa4j,
    ._abyk,
    ._ab8s,
    ._ab5x > div:nth-child(2) {
      background-color: var(--dark);
    }

    ._ab8o {
      background-color: var(--darker);
    }

    ._ab5w {
      background: var(--darker);
    }

    ._ab8j,
    ._ac1r,
    ._acfl {
      border: 1px solid var(--border-color);
      background-color: var(--dark);
    }

    ._aa4j {
      border-bottom: 1px solid var(--border-color);
    }

    ._aa5c {
      border-right: 1px solid var(--border-color);
    }

    ._acrb {
      border: 1px solid var(--border-color);
      background-color: var(--darker);
    }

    ._acrb textarea {
      color: var(--text-color);
    }
  }

  /* Light */
  lightStyling() {
    /* Cards */
    ._aac6,
    ._ab6k,
    ._aak3 {
      box-shadow: rgba(140, 149, 159, 0.15) 0px 3px 6px 0px;
    }
    ._aak3 {
      border: 1px solid #dbdbdb;
      border-radius: 8px;
      margin-top: 3rem;
    }

    /* Suggested for you */
    ._aba7 {
      padding: 1rem;
    }

    ._aak3,
    ._ab8q {
      background: #fff;
    }
  }

  /* Conditions */
  if theme==dark {
    darkStyling();
  }
  else if theme==light {
    lightStyling();
  }
  else if theme==system {
    @media (prefers-color-scheme: dark) {
      darkStyling();
    }

    @media (prefers-color-scheme: light) {
      lightStyling();
    }
  }
}